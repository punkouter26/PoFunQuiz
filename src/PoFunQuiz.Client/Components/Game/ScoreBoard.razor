@using PoFunQuiz.Core.Models
@using Radzen
@using Radzen.Blazor

<RadzenCard class="rz-display-flex rz-justify-content-space-between rz-align-items-center rz-p-2 rz-mb-2" Style="background: linear-gradient(to right, #6a11cb, #2575fc); color: white;">
    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
        <RadzenIcon Icon="timer" class="rz-mr-2" />
        <RadzenText TextStyle="TextStyle.Body1" class="@TimerClass">
            @TimeRemaining s
        </RadzenText>
    </RadzenStack>
    <RadzenStack Orientation="Orientation.Horizontal" Gap="4">
        <div class="rz-text-align-center">
            <RadzenText TextStyle="TextStyle.Caption">P1 Streak: @GameSession?.Player1Streak</RadzenText>
            <RadzenText TextStyle="TextStyle.Caption">Score: @GameSession?.Player1Score</RadzenText>
        </div>
        <div class="rz-text-align-center">
            <RadzenText TextStyle="TextStyle.Caption">P2 Streak: @GameSession?.Player2Streak</RadzenText>
            <RadzenText TextStyle="TextStyle.Caption">Score: @GameSession?.Player2Score</RadzenText>
        </div>
    </RadzenStack>
</RadzenCard>

@code {
    [Parameter] public GameSession? GameSession { get; set; }
    [Parameter] public int TimeRemaining { get; set; }

    private string TimerClass
    {
        get
        {
            var classes = new List<string>();
            if (TimeRemaining <= 5) classes.Add("timer-pulse");
            if (TimeRemaining <= 10) classes.Add("rz-text-danger");
            return string.Join(" ", classes);
        }
    }
}
